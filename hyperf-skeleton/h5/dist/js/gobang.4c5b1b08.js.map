{"version":3,"sources":["webpack:///./src/assets/defeat.png","webpack:///./src/assets/black.png","webpack:///./src/components/Chat.vue?9918","webpack:///./src/views/Gobang.vue?c682","webpack:///./src/components/Gobang.vue?f1ec","webpack:///./src/utils/piece.js","webpack:///src/components/Gobang.vue","webpack:///./src/components/Gobang.vue?d52f","webpack:///./src/components/Gobang.vue","webpack:///src/views/Gobang.vue","webpack:///./src/views/Gobang.vue?f401","webpack:///./src/views/Gobang.vue","webpack:///./src/assets/win.png","webpack:///./src/components/Gobang.vue?4bcf","webpack:///./src/assets/lose.png","webpack:///./src/assets/wait.png","webpack:///./src/views/Gobang.vue?9ba2","webpack:///./src/components/Chat.vue?e768","webpack:///src/components/Chat.vue","webpack:///./src/components/Chat.vue?ca2a","webpack:///./src/components/Chat.vue","webpack:///./src/assets/victory.png","webpack:///./src/assets/white.png"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","domProps","_s","roomInfo","title","statusText","watchMemberIds","length","playerOther","username","status","colorText","staticStyle","attrs","ref","gobang","disable","gameInfo","lastGoX","lastGoY","on","onGo","_e","playerMine","watchMode","cancelReady","ready","leave","roomId","closeGameResultLayer","gameResultOtherUsername","staticRenderFns","canvasClick","BLACK_PIECE","WHITE_PIECE","name","props","size","type","Number","default","lineColor","String","Boolean","canvasPadding","canvasObj","cellWidth","cellHeight","xBegin","yBegin","gobangMap","currentPiece","initMap","paint","methods","i","item","j","push","Promise","all","loadImage","then","imgs","$refs","canvas","canvasRect","getBoundingClientRect","width","height","context","getContext","drawBgColor","drawLines","drawPieces","fillStyle","fillRect","parseInt","hX2","hY2","y","beginPath","moveTo","lineTo","strokeStyle","lineWidth","stroke","x","black","white","img","point","getPointXY","pieceSize","arc","Math","PI","fill","drawImage","e","round","offsetX","offsetY","$emit","url","resolve","Image","onload","src","map","component","components","Gobang","Chat","isReady","playerId","color","win","showGameResultLayer","youWin","params","$route","GLOBAL","websocketConnection","onAction","onJoinInfo","onRoomReady","onRoomCancelReady","onRoomDestory","onLeave","onGobangInfo","sendEx","onClose","evt","alert","location","reload","$router","replace","data","updatePlayer","updateGobangDisable","game","$nextTick","setMap","winner","id","openGameResultLayer","userInfo","playerId1","playerId2","player1","player2","player1Ready","player2Ready","player1Color","player2Color","piece","setCurrentPiece","style","_l","index","sender","content","$event","preventDefault","sendContent","directives","rawName","value","expression","target","composing","inputContent","room","rows","wsConn","chatRecords","chatContentStyle","timer","onReceive","action","openConn","clearTimeout","close","open","allowRetry","chatContent","willScroll","scrollHeight","scrollTop","clientHeight","shift"],"mappings":"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","file":"js/gobang.4c5b1b08.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/defeat.492f4857.png\";","module.exports = __webpack_public_path__ + \"img/black.95fc5cac.png\";","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&id=49bf4fd0&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&id=49bf4fd0&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"gobang-box\"},[(_vm.roomInfo)?[_c('p',{staticClass:\"title\"},[_vm._v(\"房间\"),_c('span',{domProps:{\"textContent\":_vm._s(_vm.roomInfo.title)}})]),_c('div',{staticClass:\"room-info-box\"},[_c('div',{staticClass:\"left-box\"},[_c('p',{staticClass:\"status\",domProps:{\"textContent\":_vm._s(_vm.roomInfo.statusText)}}),_c('p',[_vm._v(\"观战：\"+_vm._s(_vm.roomInfo.watchMemberIds.length))])]),_c('div',{staticClass:\"player-box fr\"},[_c('div',{staticClass:\"info-box fl\"},[_c('p',{staticClass:\"username text-right\",domProps:{\"textContent\":_vm._s(_vm.playerOther.username)}}),_c('p',{staticClass:\"ready-status text-right\"},[(_vm.playerOther.playerId)?[(2 == _vm.roomInfo.status)?_c('span',[_vm._v(\"对方颜色：\"+_vm._s(_vm.playerOther.colorText))]):(_vm.playerOther.ready)?_c('span',[_vm._v(\"已准备\")]):_c('span',[_vm._v(\"未准备\")])]:_c('span',[_vm._v(\"等待加入\")])],2)]),_c('img',{staticClass:\"player-thumb fr\",staticStyle:{\"margin-left\":\"12px\"},attrs:{\"src\":require(\"../assets/thumb.png\")}})])]),_c('div',{staticClass:\"gobang-area\"},[_c('gobang',{ref:\"gobang\",attrs:{\"disable\":_vm.gobang.disable,\"lastGoX\":_vm.gameInfo.lastGoX,\"lastGoY\":_vm.gameInfo.lastGoY},on:{\"go\":_vm.onGo}}),(1 == _vm.roomInfo.status)?_c('img',{staticClass:\"img-wait\",attrs:{\"src\":require(\"../assets/wait.png\")}}):_vm._e()],1),_c('div',{staticClass:\"bottom-box\"},[_c('div',{staticClass:\"player-box fl\"},[_c('div',{staticClass:\"info-box fr\"},[_c('p',{staticClass:\"username\",domProps:{\"textContent\":_vm._s(_vm.playerMine.username)}}),_c('p',{staticClass:\"ready-status\"},[(_vm.playerMine.playerId)?[(2 == _vm.roomInfo.status)?_c('span',[_vm._v(\"你的颜色：\"+_vm._s(_vm.playerMine.colorText))]):(_vm.playerMine.ready)?_c('span',[_vm._v(\"已准备\")]):_c('span',[_vm._v(\"未准备\")])]:_c('span',[_vm._v(\"等待加入\")])],2)]),_c('img',{staticClass:\"player-thumb fl\",staticStyle:{\"margin-right\":\"12px\",\"margin-top\":\"14px\"},attrs:{\"src\":require(\"../assets/thumb.png\")}})]),_c('div',{staticClass:\"btn-box\"},[(1 == _vm.roomInfo.status && !_vm.watchMode)?[(_vm.isReady)?_c('button',{staticClass:\"btn-cancel-ready\",on:{\"click\":_vm.cancelReady}},[_vm._v(\"取消准备\")]):_c('button',{staticClass:\"btn-ready\",on:{\"click\":_vm.ready}},[_vm._v(\"准备\")])]:_vm._e(),_c('button',{staticClass:\"btn-leave\",on:{\"click\":_vm.leave}})],2)])]:_vm._e(),(_vm.roomInfo)?_c('chat',{staticClass:\"chat-box\",attrs:{\"room\":_vm.roomInfo.roomId,\"rows\":3}}):_vm._e(),(_vm.showGameResultLayer)?_c('div',[_c('div',{staticClass:\"layer-mask\",on:{\"click\":_vm.closeGameResultLayer}}),_c('div',{attrs:{\"id\":\"create-room-layer\"}},[_c('div',{staticClass:\"title\"},[(_vm.youWin)?_c('img',{attrs:{\"src\":require(\"../assets/victory.png\")}}):_c('img',{attrs:{\"src\":require(\"../assets/defeat.png\")}})]),_c('div',{staticClass:\"win-box\"},[_c('div',{staticClass:\"left\"},[_c('img',{staticClass:\"player-thumb\",attrs:{\"src\":require(\"../assets/thumb.png\")}}),_c('p',{staticClass:\"username\",domProps:{\"textContent\":_vm._s(_vm.playerMine.username)}}),(_vm.youWin)?_c('img',{staticClass:\"right-top\",attrs:{\"src\":require(\"../assets/win.png\")}}):_c('img',{staticClass:\"right-top\",attrs:{\"src\":require(\"../assets/lose.png\")}})]),_c('div',{staticClass:\"right\"},[_c('img',{staticClass:\"player-thumb\",attrs:{\"src\":require(\"../assets/thumb.png\")}}),_c('p',{staticClass:\"username\",domProps:{\"textContent\":_vm._s(_vm.gameResultOtherUsername)}}),(_vm.youWin)?_c('img',{staticClass:\"right-top\",attrs:{\"src\":require(\"../assets/lose.png\")}}):_c('img',{staticClass:\"right-top\",attrs:{\"src\":require(\"../assets/win.png\")}})])])])]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"gobang\"},[_c('canvas',{ref:\"canvas\",staticClass:\"gobang-canvas\",on:{\"click\":_vm.canvasClick}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default {\r\n    // 黑色棋子\r\n    BLACK_PIECE: 1,\r\n    // 白色棋子\r\n    WHITE_PIECE: 2,\r\n}","<template>\r\n  <div class=\"gobang\">\r\n    <canvas class=\"gobang-canvas\" ref=\"canvas\" @click=\"canvasClick\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Piece from \"@/utils/piece.js\"\r\nexport default {\r\n  name: \"Gobang\",\r\n  props: {\r\n    // 棋盘线条数\r\n    size: {\r\n      type: Number,\r\n      default: 15\r\n    },\r\n    // 线条颜色\r\n    lineColor: {\r\n      type: String,\r\n      default: '#AC9D6A',\r\n    },\r\n    // 是否禁用\r\n    disable:{\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    lastGoX:{\r\n      type: Number,\r\n    },\r\n    lastGoY:{\r\n      type: Number,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      canvasPadding: 16,\r\n      canvasObj: null,\r\n      // 格子宽度\r\n      cellWidth: 0,\r\n      // 格子高度\r\n      cellHeight: 0,\r\n      // 格子 x 坐标起始坐标\r\n      xBegin: 0,\r\n      // 格子 y 坐标起始坐标\r\n      yBegin: 0,\r\n      // 二维数组；0-无棋子；1-黑棋；2-白棋\r\n      gobangMap: [],\r\n      // 当前出子颜色\r\n      currentPiece: Piece.BLACK_PIECE,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.initMap()\r\n    this.paint()\r\n  },\r\n  methods: {\r\n    initMap(){\r\n      this.gobangMap = [];\r\n      for(let i = 0; i < this.size; ++i)\r\n      {\r\n        let item = [];\r\n        for(let j = 0; j < this.size; ++j)\r\n        {\r\n          item.push(0)\r\n        }\r\n        this.gobangMap.push(item)\r\n      }\r\n    },\r\n    paint() {\r\n      Promise.all([\r\n        this.loadImage(require(\"@/assets/black.png\")),\r\n        this.loadImage(require(\"@/assets/white.png\")),\r\n      ]).then(imgs => {\r\n        this.canvasObj = this.$refs.canvas;\r\n        const canvasRect = this.canvasObj.getBoundingClientRect();\r\n        this.canvasObj.width = canvasRect.width;\r\n        this.canvasObj.height = canvasRect.height;\r\n\r\n        const context = this.canvasObj.getContext(\"2d\");\r\n        this.drawBgColor(context);\r\n        this.drawLines(context);\r\n        this.drawPieces(context, imgs[0], imgs[1]);\r\n      });\r\n    },\r\n    // 画底色\r\n    drawBgColor(context){\r\n      const canvasRect = this.canvasObj.getBoundingClientRect();\r\n      context.fillStyle = '#C0AF75';\r\n      context.fillRect(0, 0, canvasRect.width, canvasRect.height);\r\n    },\r\n    // 绘制线条\r\n    drawLines(context){\r\n      const canvasRect = this.canvasObj.getBoundingClientRect();\r\n      this.cellWidth = (canvasRect.width - (this.canvasPadding * 2)) / (this.size - 1);\r\n      this.cellHeight = (canvasRect.height - (this.canvasPadding * 2)) / (this.size - 1);\r\n      this.xBegin = parseInt(this.canvasPadding) + 0.5;\r\n      const hX2 = parseInt(canvasRect.width - this.canvasPadding) + 0.5;\r\n      this.yBegin = parseInt(this.canvasPadding) + 0.5;\r\n      const hY2 = parseInt(canvasRect.height - this.canvasPadding) + 0.5;\r\n      // 绘制格子底色\r\n      context.fillStyle = '#F4EAC8';\r\n      context.fillRect(this.xBegin, this.yBegin, hX2 - this.canvasPadding, hY2 - this.canvasPadding);\r\n      // 绘制横向线条\r\n      for (let i = 0; i < this.size; ++i)\r\n      {\r\n        for (let j = 0; j < this.size; ++j)\r\n        {\r\n          const y = parseInt(this.canvasPadding + j * (this.cellHeight))\r\n          context.beginPath();\r\n          context.moveTo(this.xBegin, y)\r\n          context.lineTo(hX2, y)\r\n          context.strokeStyle = this.lineColor\r\n          context.lineWidth = 2;\r\n          context.stroke()\r\n        }\r\n      }\r\n      // 绘制竖向线条\r\n      for (let i = 0; i < this.size; ++i)\r\n      {\r\n        for (let j = 0; j < this.size; ++j)\r\n        {\r\n          const x = parseInt(this.canvasPadding + j * (this.cellWidth))\r\n          context.beginPath();\r\n          context.moveTo(x, this.yBegin)\r\n          context.lineTo(x, hY2)\r\n          context.strokeStyle = this.lineColor\r\n          context.lineWidth = 2;\r\n          context.stroke()\r\n        }\r\n      }\r\n    },\r\n    // 绘制棋子\r\n    drawPieces(context, black, white){\r\n      for(let i = 0; i < this.size; ++i)\r\n      {\r\n        for(let j = 0; j < this.size; ++j)\r\n        {\r\n          switch(this.gobangMap[i][j])\r\n          {\r\n            case 1:\r\n              // 黑棋\r\n              var img = black;\r\n              break;\r\n            case 2:\r\n              // 白棋\r\n              var img = white;\r\n              break;\r\n            default:\r\n              continue;\r\n          }\r\n          var point = this.getPointXY(i, j);\r\n          const pieceSize = 24;\r\n          // 画最后下子的圈圈\r\n          if(this.lastGoX == i && this.lastGoY == j)\r\n          {\r\n            context.beginPath();\r\n            context.fillStyle = '#70c769';\r\n            context.arc(point.x - 1, point.y - 1, pieceSize / 2 + 2, 0, 2 * Math.PI);\r\n            context.fill();\r\n          }\r\n          // 画棋子\r\n          context.drawImage(img, point.x - pieceSize / 2, point.y - pieceSize / 2, pieceSize, pieceSize)\r\n        }\r\n      }\r\n    },\r\n    // 根据格子编号获取点的XY坐标\r\n    getPointXY(i, j){\r\n      return {\r\n        x: this.xBegin + i * this.cellWidth,\r\n        y: this.yBegin + j * this.cellHeight,\r\n      }\r\n    },\r\n    // canvas 点击\r\n    canvasClick(e){\r\n      if(this.disable)\r\n      {\r\n        return;\r\n      }\r\n      let x = Math.round((e.offsetX - this.canvasPadding) / this.cellWidth)\r\n      let y = Math.round((e.offsetY - this.canvasPadding) / this.cellHeight)\r\n      if(0 == this.gobangMap[x][y])\r\n      {\r\n        this.gobangMap[x][y] = this.currentPiece;\r\n        this.$emit('go', {\r\n          x: x,\r\n          y: y,\r\n        });\r\n        this.paint();\r\n      }\r\n    },\r\n    loadImage(url) {\r\n      return new Promise(resolve => {\r\n        const img = new Image();\r\n        img.onload = () => resolve(img);\r\n        img.src = url;\r\n      });\r\n    },\r\n    setMap(map){\r\n      this.gobangMap = map;\r\n      this.paint();\r\n    },\r\n    setCurrentPiece(currentPiece){\r\n      this.currentPiece = currentPiece;\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.gobang {\r\n  .gobang-canvas {\r\n    width: calc(100vw - 32px);\r\n    height: calc(100vw - 32px);\r\n    border-radius: 14px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gobang.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gobang.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Gobang.vue?vue&type=template&id=445d2c36&scoped=true&\"\nimport script from \"./Gobang.vue?vue&type=script&lang=js&\"\nexport * from \"./Gobang.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Gobang.vue?vue&type=style&index=0&id=445d2c36&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"445d2c36\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"gobang-box\">\r\n    <template v-if=\"roomInfo\">\r\n      <p class=\"title\">房间<span v-text=\"roomInfo.title\"></span></p>\r\n      <div class=\"room-info-box\">\r\n        <div class=\"left-box\">\r\n          <p class=\"status\" v-text=\"roomInfo.statusText\"></p>\r\n          <p>观战：{{roomInfo.watchMemberIds.length}}</p>\r\n        </div>\r\n        <div class=\"player-box fr\">\r\n          <div class=\"info-box fl\">\r\n            <p class=\"username text-right\" v-text=\"playerOther.username\"></p>\r\n            <p class=\"ready-status text-right\">\r\n              <template v-if=\"playerOther.playerId\">\r\n                <span v-if=\"2 == roomInfo.status\">对方颜色：{{playerOther.colorText}}</span>\r\n                <span v-else-if=\"playerOther.ready\">已准备</span>\r\n                <span v-else>未准备</span>\r\n              </template>\r\n              <span v-else>等待加入</span>\r\n            </p>\r\n          </div>\r\n          <img class=\"player-thumb fr\" style=\"margin-left: 12px\" src=\"../assets/thumb.png\"/>\r\n        </div>\r\n      </div>\r\n      <!-- 棋盘 -->\r\n      <div class=\"gobang-area\">\r\n        <gobang ref=\"gobang\" :disable=\"gobang.disable\" v-on:go=\"onGo\" :lastGoX=\"gameInfo.lastGoX\" :lastGoY=\"gameInfo.lastGoY\"></gobang>\r\n        <img class=\"img-wait\" src=\"../assets/wait.png\" v-if=\"1 == roomInfo.status\"/>\r\n      </div>\r\n      <div class=\"bottom-box\">\r\n        <div class=\"player-box fl\">\r\n          <div class=\"info-box fr\">\r\n            <p class=\"username\" v-text=\"playerMine.username\"></p>\r\n            <p class=\"ready-status\">\r\n              <template v-if=\"playerMine.playerId\">\r\n                <span v-if=\"2 == roomInfo.status\">你的颜色：{{playerMine.colorText}}</span>\r\n                <span v-else-if=\"playerMine.ready\">已准备</span>\r\n                <span v-else>未准备</span>\r\n              </template>\r\n              <span v-else>等待加入</span>\r\n            </p>\r\n          </div>\r\n          <img class=\"player-thumb fl\" style=\"margin-right: 12px;margin-top: 14px;\" src=\"../assets/thumb.png\"/>\r\n        </div>\r\n        <div class=\"btn-box\">\r\n          <template v-if=\"1 == roomInfo.status && !watchMode\" class=\"center\">\r\n            <button class=\"btn-cancel-ready\" v-if=\"isReady\" @click=\"cancelReady\">取消准备</button>\r\n            <button class=\"btn-ready\" v-else @click=\"ready\">准备</button>\r\n          </template>\r\n          <button class=\"btn-leave\" @click=\"leave\"></button>\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <!-- 聊天 -->\r\n    <chat class=\"chat-box\" v-if=\"roomInfo\" :room=\"roomInfo.roomId\" :rows=\"3\"></chat>\r\n    <!-- 游戏结果 -->\r\n    <div v-if=\"showGameResultLayer\">\r\n      <div class=\"layer-mask\" @click=\"closeGameResultLayer\"></div>\r\n      <div id=\"create-room-layer\">\r\n        <div class=\"title\">\r\n          <img src=\"../assets/victory.png\" v-if=\"youWin\"/>\r\n          <img src=\"../assets/defeat.png\" v-else/>\r\n        </div>\r\n        <div class=\"win-box\">\r\n          <div class=\"left\">\r\n            <img class=\"player-thumb\" src=\"../assets/thumb.png\"/>\r\n            <p class=\"username\" v-text=\"playerMine.username\"></p>\r\n            <img v-if=\"youWin\" class=\"right-top\" src=\"../assets/win.png\"/>\r\n            <img v-else class=\"right-top\" src=\"../assets/lose.png\"/>\r\n          </div>\r\n          <div class=\"right\">\r\n            <img class=\"player-thumb\" src=\"../assets/thumb.png\"/>\r\n            <p class=\"username\" v-text=\"gameResultOtherUsername\"></p>\r\n            <img v-if=\"youWin\" class=\"right-top\" src=\"../assets/lose.png\"/>\r\n            <img v-else class=\"right-top\" src=\"../assets/win.png\"/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Gobang from \"@/components/Gobang.vue\";\r\nimport Chat from \"@/components/Chat.vue\";\r\nimport piece from '../utils/piece';\r\nexport default {\r\n  components: {\r\n    Gobang,\r\n    Chat,\r\n  },\r\n  data() {\r\n    return {\r\n      gobang: {\r\n        disable: true,\r\n      },\r\n      roomInfo: null,\r\n      gameInfo: {\r\n        lastGoX: null,\r\n        lastGoY: null,\r\n      },\r\n      isReady: false,\r\n      watchMode: false,\r\n      playerOther: {\r\n        playerId: null,\r\n        username: '-',\r\n        ready: false,\r\n        color: null,\r\n        colorText: '',\r\n      },\r\n      playerMine: {\r\n        playerId: null,\r\n        username: '-',\r\n        ready: false,\r\n        color: null,\r\n        colorText: '',\r\n      },\r\n      win: false,\r\n      showGameResultLayer: false,\r\n      youWin: false,\r\n      gameResultOtherUsername: '',\r\n    };\r\n  },\r\n  mounted(){\r\n    const params = this.$route.params;\r\n    if(!params.roomInfo)\r\n    {\r\n      this.$router.replace('/');\r\n      return;\r\n    }\r\n    this.watchMode = !!params.watchMode;\r\n    this.roomInfo = params.roomInfo;\r\n    this.GLOBAL.websocketConnection.onAction('room.info', this.onJoinInfo)\r\n    this.GLOBAL.websocketConnection.onAction('room.ready', this.onRoomReady)\r\n    this.GLOBAL.websocketConnection.onAction('room.cancelReady', this.onRoomCancelReady)\r\n    this.GLOBAL.websocketConnection.onAction('room.destory', this.onRoomDestory)\r\n    this.GLOBAL.websocketConnection.onAction('room.leave', this.onLeave)\r\n    this.GLOBAL.websocketConnection.onAction('gobang.info', this.onGobangInfo)\r\n    this.GLOBAL.websocketConnection.sendEx('room.info', {\r\n      roomId: this.roomInfo.roomId,\r\n    });\r\n    this.GLOBAL.websocketConnection.onClose((evt)=>{\r\n      alert('断线了')\r\n      location.reload()\r\n    })\r\n  },\r\n  methods: {\r\n    // 房间信息回调\r\n    onJoinInfo(data){\r\n      this.roomInfo = data.roomInfo;\r\n      this.updatePlayer();\r\n      this.updateGobangDisable();\r\n    },\r\n    // 准备\r\n    ready(){\r\n      this.GLOBAL.websocketConnection.sendEx('room.ready', {\r\n        roomId: this.roomInfo.roomId,\r\n      });\r\n    },\r\n    // 离开房间\r\n    leave(){\r\n      this.GLOBAL.websocketConnection.sendEx('room.leave', {\r\n        roomId: this.roomInfo.roomId,\r\n      });\r\n    },\r\n    // 准备回调\r\n    onRoomReady(data){\r\n      this.isReady = true;\r\n    },\r\n    // 取消准备\r\n    cancelReady(){\r\n      this.GLOBAL.websocketConnection.sendEx('room.cancelReady', {\r\n        roomId: this.roomInfo.roomId,\r\n      });\r\n    },\r\n    // 取消准备回调\r\n    onRoomCancelReady(data){\r\n      this.isReady = false;\r\n    },\r\n    // 房间销毁回调\r\n    onRoomDestory(data){\r\n      alert('房间被销毁')\r\n      this.$router.replace(\"/rooms\")\r\n    },\r\n    // 对战信息回调\r\n    onGobangInfo(data){\r\n      if(data.game)\r\n      {\r\n        const game = data.game;\r\n        this.gameInfo = game;\r\n        this.$nextTick(()=>{\r\n          if(this.$refs.gobang)\r\n          {\r\n            this.$refs.gobang.setMap(game.gobangMap);\r\n          }\r\n        })\r\n        this.updatePlayer();\r\n        this.updateGobangDisable();\r\n      }\r\n      if(data.winner)\r\n      {\r\n        // alert(data.winner.username + ' 赢啦！');\r\n        this.gameResultOtherUsername = this.playerOther.username;\r\n        this.youWin = (data.winner.id === this.playerMine.playerId);\r\n        this.openGameResultLayer();\r\n        this.isReady = false;\r\n      }\r\n    },\r\n    onLeave(data){\r\n      this.$router.replace(\"/rooms\")\r\n    },\r\n    updatePlayer(){\r\n      if(!this.roomInfo)\r\n      {\r\n        return;\r\n      }\r\n      if(this.GLOBAL.userInfo.id === this.roomInfo.playerId1)\r\n      {\r\n        this.playerMine.playerId = this.roomInfo.playerId1;\r\n        this.playerOther.playerId = this.roomInfo.playerId2;\r\n\r\n        this.playerMine.username = this.roomInfo.player1.username;\r\n        if(this.roomInfo.player2)\r\n        {\r\n          this.playerOther.username = this.roomInfo.player2.username;\r\n        }\r\n        else\r\n        {\r\n          this.playerOther.username = '';\r\n        }\r\n\r\n        this.playerMine.ready = this.roomInfo.player1Ready;\r\n        this.playerOther.ready = this.roomInfo.player2Ready;\r\n\r\n        if(this.gameInfo)\r\n        {\r\n          this.playerMine.color = this.gameInfo.player1Color;\r\n          this.playerOther.color = this.gameInfo.player2Color;\r\n        }\r\n      }\r\n      else// if(this.GLOBAL.userInfo.id === this.roomInfo.playerId2)\r\n      {\r\n        this.playerMine.playerId = this.roomInfo.playerId2;\r\n        this.playerOther.playerId = this.roomInfo.playerId1;\r\n\r\n        if(this.roomInfo.player2)\r\n        {\r\n          this.playerMine.username = this.roomInfo.player2.username;\r\n        }\r\n        if(this.roomInfo.player1)\r\n        {\r\n          this.playerOther.username = this.roomInfo.player1.username;\r\n        }\r\n        else\r\n        {\r\n          this.playerOther.username = '';\r\n        }\r\n\r\n        this.playerMine.ready = this.roomInfo.player2Ready;\r\n        this.playerOther.ready = this.roomInfo.player1Ready;\r\n\r\n        if(this.gameInfo)\r\n        {\r\n          this.playerMine.color = this.gameInfo.player2Color;\r\n          this.playerOther.color = this.gameInfo.player1Color;\r\n        }\r\n      }\r\n      // 颜色文字\r\n      switch(this.playerMine.color)\r\n      {\r\n        case piece.BLACK_PIECE:\r\n          this.playerMine.colorText = '黑';\r\n          break;\r\n        case piece.WHITE_PIECE:\r\n          this.playerMine.colorText = '白';\r\n          break;\r\n        default:\r\n          this.playerMine.colorText = '';\r\n          break;\r\n      }\r\n      switch(this.playerOther.color)\r\n      {\r\n        case piece.BLACK_PIECE:\r\n          this.playerOther.colorText = '黑';\r\n          break;\r\n        case piece.WHITE_PIECE:\r\n          this.playerOther.colorText = '白';\r\n          break;\r\n        default:\r\n          this.playerOther.colorText = '';\r\n          break;\r\n      }\r\n      this.$nextTick(()=>{\r\n        if(this.$refs.gobang)\r\n        {\r\n          this.$refs.gobang.setCurrentPiece(this.playerMine.color)\r\n        }\r\n      })\r\n    },\r\n    updateGobangDisable(){\r\n      if(this.gameInfo)\r\n      {\r\n        this.gobang.disable = 1 === this.roomInfo.status || !(this.gameInfo.currentPiece === this.playerMine.color)\r\n      }\r\n    },\r\n    onGo(point){\r\n      this.gobang.disable = true;\r\n      this.GLOBAL.websocketConnection.sendEx('gobang.go', {\r\n        roomId: this.roomInfo.roomId,\r\n        x: point.x,\r\n        y: point.y,\r\n      });\r\n    },\r\n    openGameResultLayer(win){\r\n      this.win = win;\r\n      this.showGameResultLayer = true;\r\n    },\r\n    closeGameResultLayer(){\r\n      this.showGameResultLayer = false;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.gobang-box{\r\n  height: 100vh;\r\n  display: flex;\r\n  // flex-flow: column;\r\n  align-content: flex-start;\r\n  flex-direction:column;\r\n  .chat-box{\r\n    flex: auto;\r\n    margin-bottom: 6px;\r\n  }\r\n}\r\n.title{\r\n  margin: 14px 0 0 0;\r\n  color: #fff;\r\n  font-weight: bold;\r\n  font-size: 20px;\r\n}\r\n.center{\r\n  text-align: center;\r\n}\r\n.readyed{\r\n  color: green;\r\n  font-weight: bold;\r\n}\r\n#player-info-box{\r\n  display: flex;\r\n  // justify-content: space-between;\r\n  flex-flow: row wrap;\r\n  align-content: flex-start;\r\n  div{\r\n    flex: 0 0 50%;\r\n  }\r\n}\r\n.button-box{\r\n  button{\r\n    margin: 0 4px;\r\n  }\r\n}\r\n.room-info-box{\r\n  color: #fff;\r\n  .left-box{\r\n    float:left;\r\n    .status{\r\n      color: #FFEA00;\r\n    }\r\n  }\r\n  p{\r\n    margin: 10px 0;\r\n  }\r\n}\r\n.player-box{\r\n  color: #fff;\r\n  .ready-status{\r\n    color: #DEDEDE;\r\n  }\r\n  .player-thumb{\r\n    width: 56px;\r\n    height: 56px;\r\n    margin-top: 4px;\r\n  }\r\n  .username{\r\n    font-weight: bold;\r\n  }\r\n}\r\n.btn-box{\r\n  float:right;\r\n  display:flex;\r\n  padding-top: 18px;\r\n}\r\n.btn-ready, .btn-cancel-ready{\r\n  background: #f3f4f8;\r\n  border:none;\r\n  outline: none;\r\n  border-radius: 30px;\r\n  width: 122px;\r\n  line-height: 48px;\r\n  text-align: center;\r\n  font-size: 20px;\r\n}\r\n.btn-ready{\r\n  color: #43BB43;\r\n}\r\n.btn-cancel-ready{\r\n  color: #F24242;\r\n}\r\n.btn-leave{\r\n  border:none;\r\n  outline: none;\r\n  border-radius: 8px;\r\n  width: 50px;\r\n  height: 50px;\r\n  background-image: url(../assets/leave.png);\r\n  background-position: center center;\r\n  background-size: 32px;\r\n  background-repeat: no-repeat;\r\n  margin-left: 10px;\r\n}\r\n#create-room-layer{\r\n  background-color: #fff;\r\n  border-radius:30px;\r\n  width: 500px;\r\n  max-width: 100%;\r\n  position:absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  .title{\r\n    margin: 0;\r\n    padding: 18px 55px;\r\n    img{\r\n      max-width: 100%;\r\n    }\r\n  }\r\n  .win-box{\r\n    display: flex;\r\n    text-align: center;\r\n    height: 164px;\r\n    .left{\r\n      width: 50%;\r\n      background:rgba(233,236,243,1);\r\n      border-radius:0px 0px 0px 30px;\r\n      color: #323F49;\r\n      font-weight: bold;\r\n      position: relative;\r\n    }\r\n    .right{\r\n      width: 50%;\r\n      background:rgba(74,82,99,1);\r\n      border-radius:0px 0px 30px 0px;\r\n      color: #fff;\r\n      font-weight: bold;\r\n      position: relative;\r\n    }\r\n    .player-thumb{\r\n      width: 56px;\r\n      height: 56px;\r\n      margin-top: 40px;\r\n      border: 1px solid rgba(0, 0, 0, 0.25);\r\n      border-radius: 100%;\r\n    }\r\n    .right-top{\r\n      width: 60px;\r\n      position: absolute;\r\n      top: 0;\r\n      right: 0;\r\n    }\r\n  }\r\n}\r\n.gobang-area{\r\n  position: relative;\r\n  .img-wait{\r\n    position:absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    width: 284px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gobang.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gobang.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Gobang.vue?vue&type=template&id=73efe67e&scoped=true&\"\nimport script from \"./Gobang.vue?vue&type=script&lang=js&\"\nexport * from \"./Gobang.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Gobang.vue?vue&type=style&index=0&id=73efe67e&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73efe67e\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/win.d00705e3.png\";","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gobang.vue?vue&type=style&index=0&id=445d2c36&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gobang.vue?vue&type=style&index=0&id=445d2c36&lang=less&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/lose.637c776d.png\";","module.exports = __webpack_public_path__ + \"img/wait.3de71593.png\";","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gobang.vue?vue&type=style&index=0&id=73efe67e&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gobang.vue?vue&type=style&index=0&id=73efe67e&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chat\"},[_c('ul',{ref:\"chatContent\",staticClass:\"chat-content\",style:(_vm.chatContentStyle)},_vm._l((_vm.chatRecords),function(item,index){return _c('li',[(1 == item.type)?_c('span',{staticClass:\"sender sender-system\"},[_c('span',{domProps:{\"textContent\":_vm._s(item.sender)}}),_vm._v(\": \")]):_vm._e(),(2 == item.type)?_c('span',{staticClass:\"sender sender-chat\"},[_c('span',{domProps:{\"textContent\":_vm._s(item.sender)}}),_vm._v(\": \")]):_vm._e(),_c('span',{domProps:{\"textContent\":_vm._s(item.content)}})])}),0),_c('form',{staticClass:\"input-area\",on:{\"submit\":function($event){$event.preventDefault();return _vm.sendContent($event)}}},[_c('div',{staticClass:\"send-input-box\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputContent),expression:\"inputContent\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.inputContent)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.inputContent=$event.target.value}}}),_c('button',{staticClass:\"btn-send\"})])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"chat\">\r\n    <!-- <textarea class=\"chat-content\" contentEditable=\"true\" readonly v-text=\"chatContent\" ></textarea> -->\r\n    <ul ref=\"chatContent\" class=\"chat-content\" :style=\"chatContentStyle\">\r\n      <li v-for=\"(item, index) in chatRecords\">\r\n        <span class=\"sender sender-system\" v-if=\"1 == item.type\"><span v-text=\"item.sender\"></span>: </span>\r\n        <span class=\"sender sender-chat\" v-if=\"2 == item.type\"><span v-text=\"item.sender\"></span>: </span>\r\n        <span v-text=\"item.content\"></span>\r\n      </li>\r\n    </ul>\r\n    <form class=\"input-area\" @submit.prevent=\"sendContent\">\r\n      <div class=\"send-input-box\">\r\n        <input type=\"text\" v-model=\"inputContent\"/>\r\n        <button class=\"btn-send\"></button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport WS from '../utils/ws';\r\nexport default {\r\n  name: \"Chat\",\r\n  props: {\r\n    room: {\r\n    },\r\n    rows: {\r\n      type: Number,\r\n      default: 10,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      // WebSocket 连接对象\r\n      wsConn: null,\r\n      // 输入区内容\r\n      inputContent: '',\r\n      // 聊天记录\r\n      chatRecords: [],\r\n      // 聊天内容区样式\r\n      chatContentStyle: '',\r\n      timer: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.wsConn = new WS\r\n    this.wsConn.onAction('im.receive', this.onReceive)\r\n    this.wsConn.onClose((evt)=>{\r\n      this.chatRecords.push({\r\n        action: 'im.receive',\r\n        sender: '系统消息',\r\n        type: 1,\r\n        content: '断线重连...',\r\n      });\r\n      if(false !== this.timer)\r\n      {\r\n        // this.timer = setTimeout(this.openConn, 3000);\r\n      }\r\n    })\r\n    this.openConn()\r\n    this.chatContentStyle = 'height:' + (24 * this.rows + 20) + 'px';\r\n  },\r\n  beforeDestroy(){\r\n    if(this.timer)\r\n    {\r\n      clearTimeout(this.timer)\r\n    }\r\n    this.timer = false;\r\n    this.wsConn.close();\r\n  },\r\n  methods: {\r\n    openConn(){\r\n      this.wsConn.open(process.env.VUE_APP_IM_WEBSOCKET_URL, ()=>{\r\n        this.wsConn.sendEx('im.joinRoom', {\r\n          roomId: this.room,\r\n        });\r\n      });\r\n    },\r\n    // 发送内容\r\n    sendContent(){\r\n      if('' === this.inputContent)\r\n      {\r\n        return;\r\n      }\r\n      this.wsConn.sendEx('im.send', {\r\n        content: this.inputContent,\r\n        roomId: this.room,\r\n      });\r\n      this.inputContent = '';\r\n    },\r\n    // 接收内容\r\n    onReceive(data, allowRetry = true){\r\n      const chatContent = this.$refs.chatContent;\r\n      if(!chatContent)\r\n      {\r\n        if(!allowRetry)\r\n        {\r\n          return;\r\n        }\r\n        this.$nextTick(()=>{\r\n          this.onReceive(data, false)\r\n        })\r\n        return;\r\n      }\r\n      const willScroll = chatContent.scrollHeight - chatContent.scrollTop === chatContent.clientHeight;\r\n      if(this.chatRecords.length >= 100)\r\n      {\r\n        this.chatRecords.shift();\r\n      }\r\n      this.chatRecords.push(data);\r\n      if(willScroll)\r\n      {\r\n        this.$nextTick(function(){\r\n          chatContent.scrollTop = chatContent.scrollHeight;\r\n        })\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.chat {\r\n  display: flex;\r\n  flex-direction:column;\r\n  .chat-content{\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n    flex:auto;\r\n    border:none;\r\n    background:rgba(0,0,0,0.5);\r\n    border-radius:8px;\r\n    outline: none;\r\n    padding: 10px;\r\n    list-style: none;\r\n    color: #fff;\r\n    overflow: auto;\r\n    margin-bottom: 6px;\r\n    margin-top: 0;\r\n    li{\r\n      word-break: break-word;\r\n      line-height: 24px;\r\n      span{\r\n        &.sender{\r\n          color: #FFA81E;\r\n          &.sender-system{\r\n            color: #E74856;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .input-area{\r\n    .send-input-box{\r\n      line-height: 48px;\r\n      display: flex;\r\n      flex-flow:row;\r\n      border-radius:10px;\r\n      background-color: #E9ECF3;\r\n      input{\r\n        flex: 1;\r\n        width: 100%;\r\n        line-height: 48px;\r\n        outline: none;\r\n        border:none;\r\n        font-size: 24px;\r\n        color: #323F49;\r\n        border-radius:12px;\r\n        background-color: #E9ECF3;\r\n        box-sizing: border-box;\r\n        padding-left: 20px;\r\n        padding-right: 0;\r\n      }\r\n      .btn-send{\r\n        width: 64px;\r\n        border:none;\r\n        outline: none;\r\n        background-image: url(../assets/send.png);\r\n        background-repeat: no-repeat;\r\n        background-position: center;\r\n        background-size: 32px;\r\n        border-radius:12px;\r\n        background-color: #E9ECF3;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=49bf4fd0&scoped=true&\"\nimport script from \"./Chat.vue?vue&type=script&lang=js&\"\nexport * from \"./Chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chat.vue?vue&type=style&index=0&id=49bf4fd0&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"49bf4fd0\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/victory.79b8c81f.png\";","module.exports = __webpack_public_path__ + \"img/white.0a2c0e7b.png\";"],"sourceRoot":""}